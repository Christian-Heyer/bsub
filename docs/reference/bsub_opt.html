<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Parameters for bsub — bsub_opt • bsub</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Parameters for bsub — bsub_opt" />
<meta property="og:description" content="Parameters for bsub" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bsub</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/bsub_intro.html">Send R code/R scripts/shell commands to LSF cluster</a>
    </li>
    <li>
      <a href="../articles/configure_bsub_package.html">Configure bsub package</a>
    </li>
    <li>
      <a href="../articles/two_ssh.html">What if you need to establish two ssh connections to reach the submission node</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/jokergoo/bsub/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Parameters for bsub</h1>
    
    <div class="hidden name"><code>bsub_opt.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Parameters for bsub</p>
    </div>

    <pre class="usage"><span class='fu'>bsub_opt</span>(<span class='no'>...</span>, <span class='kw'>RESET</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>READ.ONLY</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>LOCAL</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>ADD</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Arguments for the parameters, see "details" section</p></td>
    </tr>
    <tr>
      <th>RESET</th>
      <td><p>reset to default values</p></td>
    </tr>
    <tr>
      <th>READ.ONLY</th>
      <td><p>please ignore</p></td>
    </tr>
    <tr>
      <th>LOCAL</th>
      <td><p>please ignore</p></td>
    </tr>
    <tr>
      <th>ADD</th>
      <td><p>please ignore</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>There are following parameters:</p>
<dl'>
  <dt><code>packages</code></dt><dd><p>A character vector with package names that will be loaded before running the script.</p></dd>
  <dt><code>image</code></dt><dd><p>A character vector of RData/rda files that will be loaded before running the script.</p></dd>
  <dt><code>temp_dir</code></dt><dd><p>Path of temporary folder where the temporary R/bash scripts will be put.</p></dd>
  <dt><code>output_dir</code></dt><dd><p>Path of output folder where the output/flag files will be put.</p></dd>
  <dt><code>enforce</code></dt><dd><p>If a flag file for the job is found, whether to enforce to rerun the job.</p></dd>
  <dt><code>R_version</code></dt><dd><p>The version of R.</p></dd>
  <dt><code>working_dir</code></dt><dd><p>The working directory.</p></dd>
  <dt><code>ignore</code></dt><dd><p>Whether ignore <code><a href='bsub_chunk.html'>bsub_chunk</a></code>, <code><a href='bsub_script.html'>bsub_script</a></code> and <code><a href='bsub_cmd.html'>bsub_cmd</a></code>.</p></dd>
  <dt><code>local</code></dt><dd><p>Run job locally (not submitting to the LSF cluster)?</p></dd>
  <dt><code>call_Rscript</code></dt><dd><p>How to call <code>Rscript</code> by specifying an R version number.</p></dd>
  <dt><code>submission_node</code></dt><dd><p>A list of node names for submitting jobs.</p></dd>
  <dt><code>login_node</code></dt><dd><p>This value basically is the same as <code>submission_node</code> unless the login nodes are different from submission nodes.</p></dd>
  <dt><code>sh_head</code></dt><dd><p>Commands that are written as head of the sh script.</p></dd>
  <dt><code>user</code></dt><dd><p>Username on the submission node.</p></dd>
  <dt><code>group</code></dt><dd><p>The user group</p></dd>
  <dt><code>ssh_envir</code></dt><dd><p>The commands for setting bash environment for successfully running bjobs, bsub, ...</p></dd>
  <dt><code>bsub_template</code></dt><dd><p>Template for constructing <code>bsub</code> command.</p></dd>
  <dt><code>parse_time</code></dt><dd><p>A function that parses time string from the LSF <code>bjobs</code> command to a <code><a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct</a></code> object.</p></dd>
  <dt><code>verbose</code></dt><dd><p>Whether to print more messages.</p></dd>

</dl>

<p><code>ssh_envir</code> should be properly set so that LSF binaries such as <code>bsub</code> or <code>bjobs</code> can be properly found.
There are some environment variables initialized when logging in the bash terminal while they are not initialized with the
ssh connection. Thus, some environment variables should be manually set.</p>
<p>An example for <code>ssh_envir</code> is as follows. The <code>LSF_ENVDIR</code> and <code>LSF_SERVERDIR</code> should be defined and exported.</p>
<p></p><pre>
    <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"source /etc/profile"</span>,
      <span class='st'>"export LSF_ENVDIR=/opt/lsf/conf"</span>,
      <span class='st'>"export LSF_SERVERDIR=/opt/lsf/10.1/linux3.10-glibc2.17-x86_64/etc"</span>)</pre>

<p>The values of these two variables can be obtained by entering following commands in your bash terminal (on the submission node):</p>
<p></p><pre>
    <span class='no'>echo</span> $<span class='no'>LSF_ENVDIR</span>
    <span class='no'>echo</span> $<span class='no'>LSF_SERVERDIR</span></pre>

<p>The time strings by LSF <code>bjobs</code> command might be different for different configurations. The **bsub**
package needs to convert the time strings to <code><a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXlt</a></code> objects for calculating the time difference. Thus, if
the default time string parsing fails, users need to provide a user-defined function and set with <code>parse_time</code>
option in <code>bsub_opt</code>. The function accepts a vector of time strings and returns a <code><a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXlt</a></code> object. For example,
if the time string returned from <code>bjobs</code> command is in a form of <code>Dec 1 18:00:00 2019</code>, the parsing function
can be defined as:</p>
<p></p><pre>
    bsub_opt$parse_time = function(x) {
        as.POSIXlt(x, format = "\&lt;!-- %b \\%d \\%H:\\%M:\\%S \\%Y") --&gt;
    }  </pre>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The corresponding option values.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># The default bsub_opt</span>
<span class='no'>bsub_opt</span></div><div class='output co'>#&gt;  Option          Value                  
#&gt;  ---------------:---------------------------------------------------------------
#&gt;  packages        NULL                   
#&gt;  image           NULL                   
#&gt;  temp_dir        ~/.bsub_temp           
#&gt;  output_dir      ~/.bsub_temp           
#&gt;  enforce         TRUE                   
#&gt;  R_version       4.0.0                  
#&gt;  working_dir     ""                     
#&gt;  wd              ""                     
#&gt;  ignore          FALSE                  
#&gt;  local           FALSE                  
#&gt;  call_Rscript    a user-defined function
#&gt;  submission_node NULL                   
#&gt;  login_node      NULL                   
#&gt;  sh_head         ""                     
#&gt;  user            jokergoo               
#&gt;  group           NULL                   
#&gt;  ssh_envir       source /etc/profile    
#&gt;  bsub_template   a user-defined function
#&gt;  parse_time      NULL                   
#&gt;  verbose         FALSE                  </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Zuguang Gu.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


