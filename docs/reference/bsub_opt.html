<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Parameters for bsub — bsub_opt • bsub</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Parameters for bsub — bsub_opt"><meta property="og:description" content="Parameters for bsub"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">bsub</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.99.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/bsub.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/jokergoo/bsub/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Parameters for bsub</h1>
    <small class="dont-index">Source: <a href="https://github.com/jokergoo/bsub/blob/HEAD/R/global.R" class="external-link"><code>R/global.R</code></a></small>
    <div class="hidden name"><code>bsub_opt.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Parameters for bsub</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bsub_opt</span><span class="op">(</span><span class="va">...</span>, RESET <span class="op">=</span> <span class="cn">FALSE</span>, READ.ONLY <span class="op">=</span> <span class="cn">NULL</span>, LOCAL <span class="op">=</span> <span class="cn">FALSE</span>, ADD <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>...</dt>
<dd><p>Arguments for the parameters, see "details" section</p></dd>


<dt>RESET</dt>
<dd><p>reset to default values</p></dd>


<dt>READ.ONLY</dt>
<dd><p>please ignore</p></dd>


<dt>LOCAL</dt>
<dd><p>please ignore</p></dd>


<dt>ADD</dt>
<dd><p>please ignore</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The corresponding option values.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>There are following global parameters:</p><ul><li><p><code>packages</code>: A character vector with package names that will be loaded before running the script.</p></li>
<li><p><code>image</code>: A character vector of RData/rda files that will be loaded before running the script.</p></li>
<li><p><code>temp_dir</code>: Path of temporary folder where the temporary R/bash scripts will be put.</p></li>
<li><p><code>output_dir</code>: Path of output folder where the output/flag files will be put.</p></li>
<li><p><code>enforce</code>: If a flag file for the job is found, whether to enforce to rerun the job.</p></li>
<li><p><code>R_version</code>: The version of R.</p></li>
<li><p><code>working_dir</code>: The working directory.</p></li>
<li><p><code>ignore</code>: Whether ignore <code>bsub_chunk</code>, <code>bsub_script</code> and <code>bsub_cmd</code>.</p></li>
<li><p><code>local</code>: Run job locally (not submitting to the LSF cluster)?</p></li>
<li><p><code>call_Rscript</code>: How to call <code>Rscript</code> by specifying an R version number.</p></li>
<li><p><code>submission_node</code>: A list of node names for submitting jobs.</p></li>
<li><p><code>login_node</code>: This value basically is the same as <code>submission_node</code> unless the login nodes are different from submission nodes.</p></li>
<li><p><code>sh_head</code>: Commands that are written as head of the sh script.</p></li>
<li><p><code>user</code>: Username on the submission node.</p></li>
<li><p><code>group</code>: The user group</p></li>
<li><p><code>ssh_envir</code>: The commands for setting bash environment for successfully running bjobs, bsub, ...</p></li>
<li><p><code>bsub_template</code>: Template for constructing <code>bsub</code> command.</p></li>
<li><p><code>parse_time</code>: A function that parses time string from the LSF <code>bjobs</code> command to a <code>POSIXct</code> object.</p></li>
<li><p><code>verbose</code>: Whether to print more messages.</p></li>
</ul><p><code>ssh_envir</code> should be properly set so that LSF binaries such as <code>bsub</code> or <code>bjobs</code> can be properly found.
There are some environment variables initialized when logging in the bash terminal while they are not initialized with the
ssh connection. Thus, some environment variables should be manually set.</p>
<p>An example for <code>ssh_envir</code> is as follows. The <code>LSF_ENVDIR</code> and <code>LSF_SERVERDIR</code> should be defined and exported.</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"source /etc/profile"</span>,</span>
<span>  <span class="st">"export LSF_ENVDIR=/opt/lsf/conf"</span>,</span>
<span>  <span class="st">"export LSF_SERVERDIR=/opt/lsf/10.1/linux3.10-glibc2.17-x86_64/etc"</span><span class="op">)</span></span></code></pre><p></p></div>
<p>The values of these two variables can be obtained by entering following commands in your bash terminal (on the submission node):</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>echo <span class="sc">$</span>LSF_ENVDIR</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>echo <span class="sc">$</span>LSF_SERVERDIR</span></code></pre><p></p></div>
<p>The time strings by LSF <code>bjobs</code> command might be different for different configurations. The <strong>bsub</strong>
package needs to convert the time strings to <code>POSIXlt</code> objects for calculating the time difference. Thus, if
the default time string parsing fails, users need to provide a user-defined function and set with <code>parse_time</code>
option in <code>bsub_opt</code>. The function accepts a vector of time strings and returns a <code>POSIXlt</code> object. For example,
if the time string returned from <code>bjobs</code> command is in a form of <code>Dec 1 18:00:00 2019</code>, the parsing function
can be defined as:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">bsub_opt</span><span class="op">$</span><span class="va">parse_time</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXlt</a></span><span class="op">(</span><span class="va">x</span>, format <span class="op">=</span> <span class="st">"\\%b \\%d \\%H:\\%M:\\%S \\%Y"</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre><p></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># The default bsub_opt</span></span></span>
<span class="r-in"><span><span class="va">bsub_opt</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Option          Value                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---------------:-------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  packages        NULL                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  image           NULL                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  temp_dir        ~/.bsub_temp           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  output_dir      ~/.bsub_temp           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  enforce         TRUE                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  R_version       4.3.1                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  working_dir     ""                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  wd              ""                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ignore          FALSE                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  local           FALSE                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  call_Rscript    a user-defined function</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  submission_node NULL                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  login_node      NULL                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  sh_head         ""                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  user            guz                    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  group           NULL                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ssh_envir       source /etc/profile    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  bsub_template   a user-defined function</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  parse_time      NULL                   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  verbose         FALSE                  </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Zuguang Gu.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

